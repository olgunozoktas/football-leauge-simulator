import{r as i,b as S}from"./app-DKWSqCLn.js";import{u as P}from"./index-DLIh3Fdr.js";function L(n,e,{checkForDefaultPrevented:o=!0}={}){return function(r){if(n==null||n(r),o===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}var p=globalThis!=null&&globalThis.document?i.useLayoutEffect:()=>{},T=S.useId||(()=>{}),h=0;function b(n){const[e,o]=i.useState(T());return p(()=>{o(t=>t??String(h++))},[n]),n||(e?`radix-${e}`:"")}function M(n){const e=i.useRef(n);return i.useEffect(()=>{e.current=n}),i.useMemo(()=>(...o)=>{var t;return(t=e.current)==null?void 0:t.call(e,...o)},[])}function D({prop:n,defaultProp:e,onChange:o=()=>{}}){const[t,r]=v({defaultProp:e,onChange:o}),u=n!==void 0,l=u?n:t,d=M(o),a=i.useCallback(s=>{if(u){const c=typeof s=="function"?s(n):s;c!==n&&d(c)}else r(s)},[u,n,r,d]);return[l,a]}function v({defaultProp:n,onChange:e}){const o=i.useState(n),[t]=o,r=i.useRef(t),u=M(e);return i.useEffect(()=>{r.current!==t&&(u(t),r.current=t)},[t,r,u]),o}function I(n,e){return i.useReducer((o,t)=>e[o][t]??o,n)}var U=n=>{const{present:e,children:o}=n,t=y(e),r=typeof o=="function"?o({present:t.isPresent}):i.Children.only(o),u=P(t.ref,C(r));return typeof o=="function"||t.isPresent?i.cloneElement(r,{ref:u}):null};U.displayName="Presence";function y(n){const[e,o]=i.useState(),t=i.useRef({}),r=i.useRef(n),u=i.useRef("none"),l=n?"mounted":"unmounted",[d,a]=I(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return i.useEffect(()=>{const s=A(t.current);u.current=d==="mounted"?s:"none"},[d]),p(()=>{const s=t.current,m=r.current;if(m!==n){const N=u.current,f=A(s);n?a("MOUNT"):f==="none"||(s==null?void 0:s.display)==="none"?a("UNMOUNT"):a(m&&N!==f?"ANIMATION_OUT":"UNMOUNT"),r.current=n}},[n,a]),p(()=>{if(e){let s;const m=e.ownerDocument.defaultView??window,c=f=>{const R=A(t.current).includes(f.animationName);if(f.target===e&&R&&(a("ANIMATION_END"),!r.current)){const O=e.style.animationFillMode;e.style.animationFillMode="forwards",s=m.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=O)})}},N=f=>{f.target===e&&(u.current=A(t.current))};return e.addEventListener("animationstart",N),e.addEventListener("animationcancel",c),e.addEventListener("animationend",c),()=>{m.clearTimeout(s),e.removeEventListener("animationstart",N),e.removeEventListener("animationcancel",c),e.removeEventListener("animationend",c)}}else a("ANIMATION_END")},[e,a]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:i.useCallback(s=>{s&&(t.current=getComputedStyle(s)),o(s)},[])}}function A(n){return(n==null?void 0:n.animationName)||"none"}function C(n){var t,r;let e=(t=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:t.get,o=e&&"isReactWarning"in e&&e.isReactWarning;return o?n.ref:(e=(r=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:r.get,o=e&&"isReactWarning"in e&&e.isReactWarning,o?n.props.ref:n.props.ref||n.ref)}export{U as P,b as a,p as b,L as c,M as d,D as u};
